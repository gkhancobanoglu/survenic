<!DOCTYPE html>
<html lang="{{ aSurveyInfo.languagecode }}" dir="{{ aSurveyInfo.dir }}" class="{{ aSurveyInfo.languagecode }} dir-{{ aSurveyInfo.dir }} {{ aSurveyInfo.class.html }}" {{ aSurveyInfo.attr.html }}>
  {% block head %}
    {{ include('./subviews/header/head.twig') }}
  {% endblock %}
  
  <body class="{{ aSurveyInfo.class.body }} font-{{ aSurveyInfo.options.font }} lang-{{ aSurveyInfo.languagecode }} {{ aSurveyInfo.surveyformat }} {% if aSurveyInfo.options.brandlogo == 'on' %}brand-logo{% endif %}" 
        {{ aSurveyInfo.attr.body }} 
        data-thememode="{{ aSurveyInfo.options.thememode | default('light') }}">

    {% if aSurveyInfo.emcache %}
      <span id="__emcache_debug" value="on" hidden></span>
    {% else %}
      <span id="__emcache_debug" value="off" hidden></span>
    {% endif %}

    {% block pjaxbegin %}
      <div id="beginScripts" class="script-container">
        <###begin###>
      </div>
    {% endblock %}

    <article>
      <div id="{{ aSurveyInfo.id.dynamicreload }}">
        {% block body %}

          {% block nav_bar %}
            {{ include('./subviews/header/nav_bar.twig') }}
          {% endblock %}

          {% block progress %}
            {{ include('./subviews/header/progress_bar.twig') }}
          {% endblock %}

          {% block content %}
            {% set sViewContent = './subviews/content/' ~ aSurveyInfo.include_content ~ '.twig' %}
            {% include './subviews/content/outerframe.twig' with { 'include_content': sViewContent } %}
          {% endblock %}

          {{ include('./subviews/messages/bootstrap_alert_modal.twig') }}

          {{ registerScript("BasicThemeScripts", "
              if (!window.basicThemeScripts) {
                  window.basicThemeScripts = new ThemeScripts();
              }
              basicThemeScripts.initGlobal();
          ", "POS_END") }}

        {% endblock %}
      </div>
    </article>

    {% block footer %}
      {{ include('./subviews/footer/footer.twig') }}
    {% endblock %}

    {% block pjaxend %}
      <div id="bottomScripts" class="script-container">
        <###end###>
      </div>
    {% endblock %}

    {% block themescripts %}
      <script>
        window.basicThemeScripts.init();
      </script>
    {% endblock %}
    
  </body>
</html>
