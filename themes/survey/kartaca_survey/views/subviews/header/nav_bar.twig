{% if not aSurveyInfo.popupPreview %}
    {% set navClass = "navbar-dark" %}
    {% if aSurveyInfo.template == "bootswatch" %}
        {% set navClass = "navbar-default" %}
    {% endif %}

    {% set ShowMenu = (aSurveyInfo.aNavigator.load.show == "Y" or aSurveyInfo.aNavigator.save.show == "Y")
        or ((aSurveyInfo.bShowClearAll == true or aSurveyInfo.bShowClearAll == null) and aSurveyInfo.options.showclearall == 'on')
        or (aSurveyInfo.aQuestionIndex.bShow == true and aSurveyInfo.format != 'A')
        or (aSurveyInfo.alanguageChanger.show)
    %}

    <div id="survey-nav" class="navbar {{ navClass }} navbar-expand-md shadow-sm px-3 py-2"
         style="background: linear-gradient(90deg, #1e3a8a, #1e40af); border-radius: 0 0 12px 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.08);">
        <div class="container-fluid d-flex justify-content-between align-items-center">
            
            <div class="flex-grow-1 text-center">
                <span style="
                    color: #e0e7ff;
                    font-size: 1.6rem;
                    font-weight: 600;
                    letter-spacing: 0.4px;
                    text-shadow: 0 1px 3px rgba(0,0,0,0.1);
                ">
                    {{ aSurveyInfo.name }}
                </span>
            </div>

            {% if ShowMenu %}
                <div id="navbar" class="collapse navbar-collapse justify-content-end ms-2">
                    <ul class="nav navbar-nav navbar-action-link d-flex align-items-center gap-3">
                        {{ include('./subviews/navigation/save_links.twig') }}
                        {{ include('./subviews/navigation/clearall_links.twig') }}
                        {{ include('./subviews/navigation/question_index_menu.twig') }}
                        {{ include('./subviews/navigation/language_changer_top_menu.twig') }}
                    </ul>
                </div>
            {% endif %}
        </div>
    </div>
{% endif %}
